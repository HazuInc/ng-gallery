{"version":3,"file":"gallery-lib.js.map","sources":["ng://gallery-lib/lib/config/gallery.default.ts","ng://gallery-lib/lib/utils/get.ts","ng://gallery-lib/lib/service/gallery.service.ts","ng://gallery-lib/lib/component/gallery/gallery.component.ts","ng://gallery-lib/lib/component/gallery-bullets/gallery-bullets.component.ts","ng://gallery-lib/lib/component/gallery-image/gallery-image.animation.ts","ng://gallery-lib/lib/component/gallery-image/gallery-image.component.ts","ng://gallery-lib/lib/component/gallery-loader/gallery-loader.component.ts","ng://gallery-lib/lib/component/gallery-main/gallery-main.component.ts","ng://gallery-lib/lib/component/gallery-modal/gallery-modal.component.ts","ng://gallery-lib/lib/component/gallery-nav/gallery-nav.component.ts","ng://gallery-lib/lib/component/gallery-player/gallery-player.component.ts","ng://gallery-lib/lib/component/gallery-text/gallery-text.component.ts","ng://gallery-lib/lib/component/gallery-thumb/gallery-thumb.component.ts","ng://gallery-lib/lib/utils/isEqual.ts","ng://gallery-lib/lib/directive/gallery.directive.ts","ng://gallery-lib/lib/directive/lazy.directive.ts","ng://gallery-lib/lib/directive/tap.directive.ts","ng://gallery-lib/lib/gallery.module.ts"],"sourcesContent":["import { GalleryState } from '../service/gallery.state';\r\nimport { GalleryConfig } from './gallery.config';\r\n\r\nexport const defaultState: GalleryState = {\r\n  images: undefined,\r\n  prevIndex: 0,\r\n  currIndex: 0,\r\n  hasNext: undefined,\r\n  hasPrev: undefined,\r\n  active: false\r\n};\r\n\r\nexport const defaultConfig: GalleryConfig = {\r\n  style: {\r\n    background: '#121519',\r\n    width: '900px',\r\n    height: '500px'\r\n  },\r\n  animation: 'fade',\r\n  loader: {\r\n    width: '50px',\r\n    height: '50px',\r\n    position: 'center',\r\n    icon: 'oval'\r\n  },\r\n  description: {\r\n    position: 'bottom',\r\n    overlay: false,\r\n    text: true,\r\n    counter: true,\r\n    style: {\r\n      color: 'red'\r\n    }\r\n  },\r\n  player: {\r\n    autoplay: false,\r\n    speed: 3000\r\n  },\r\n  thumbnails: {\r\n    width: 120,\r\n    height: 90,\r\n    position: 'left',\r\n    space: 30\r\n  }\r\n};\r\n\r\n\r\n\r\n","export function get(obj: any, path: string, def: any = undefined) {\r\n  if (!obj || !path) {\r\n    return def;\r\n  }\r\n\r\n  let arr = path.split('.');\r\n  let current = obj;\r\n\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (!current[arr[i]]){\r\n      return def;\r\n    }\r\n    current = current[arr[i]];\r\n  }\r\n\r\n  return current || def;\r\n\r\n}","import { Injectable, Optional } from '@angular/core';\r\n\r\nimport { GalleryState, GalleryImage } from './gallery.state';\r\nimport { GalleryConfig } from '../config/gallery.config';\r\nimport { defaultState, defaultConfig } from '../config/gallery.default';\r\n\r\nimport { get } from '../utils/get';\r\nimport { Subject } from 'rxjs';\r\n\r\nimport { BehaviorSubject, Observable, of, interval as rxInterval } from 'rxjs';\r\nimport { switchMap, tap, takeWhile, finalize } from 'rxjs/operators';\r\n\r\nexport class GalleryService {\r\n\r\n  /** Gallery state */\r\n  state: BehaviorSubject<GalleryState>;\r\n  /** Gallery config */\r\n  config: GalleryConfig = defaultConfig;\r\n  /** Gallery slide show player */\r\n  player: Subject<number>;\r\n\r\n  constructor(@Optional() config: GalleryConfig) {\r\n\r\n    /** Initialize the state */\r\n    this.state = new BehaviorSubject<GalleryState>(defaultState);\r\n    /** Initialize the config */\r\n    this.config = Object.assign({}, defaultConfig, config);\r\n\r\n    /** Initialize the player for play/pause commands */\r\n    this.player = new Subject();\r\n    this.player.pipe(switchMap((interval) => (interval) ? this.playerEngine(interval) : of(null))).subscribe();\r\n  }\r\n\r\n  /** Load images and reset the state */\r\n  load(images: GalleryImage[]) {\r\n\r\n    this.state.next({\r\n      images: images,\r\n      currIndex: 0,\r\n      hasNext: images.length > 1,\r\n      hasPrev: false,\r\n      active: false\r\n    });\r\n  }\r\n\r\n  /** Set current image and update the state */\r\n  set(index: number) {\r\n    const state = this.state.getValue();\r\n\r\n    this.state.next(Object.assign({}, state, {\r\n      prevIndex: state.currIndex,\r\n      currIndex: index,\r\n      hasNext: index < get(state, 'images.length', 0) - 1,\r\n      hasPrev: index > 0,\r\n      active: true\r\n    }));\r\n  }\r\n\r\n  /** Go to next image and update the state */\r\n  next() {\r\n    const state = this.state.getValue();\r\n\r\n    if (state.hasNext) {\r\n      const index = (state.currIndex || 0) + 1;\r\n      this.set(index);\r\n    } else {\r\n      this.set(0);\r\n    }\r\n  }\r\n\r\n  /** Go to previous image and update the state */\r\n  prev() {\r\n    const state = this.state.getValue();\r\n\r\n    if (state.hasPrev) {\r\n      const index = (state.currIndex || 0) - 1;\r\n      this.set(index);\r\n    } else {\r\n      this.set(get(state, 'images.length', 0) - 1);\r\n    }\r\n  }\r\n\r\n  /** Close gallery modal if open */\r\n  close() {\r\n    const state = this.state.getValue();\r\n\r\n    this.state.next(Object.assign({}, state, {\r\n      active: false,\r\n      play: false\r\n    }));\r\n    this.stop();\r\n  }\r\n\r\n  /** Reset gallery with initial state */\r\n  reset() {\r\n    this.state.next(defaultState);\r\n    this.stop();\r\n  }\r\n\r\n  /** Play slide show */\r\n  play(interval?: number) {\r\n    const speed = interval || get(this.config, 'player.speed', 0) || 2000;\r\n\r\n    const state = this.state.getValue();\r\n    /** Open and play the gallery, 'active' opens gallery modal */\r\n    this.state.next(Object.assign({}, state, { play: true, active: true }));\r\n    this.player.next(speed);\r\n  }\r\n\r\n  /** End slide show */\r\n  stop() {\r\n    this.player.next(0);\r\n  }\r\n\r\n  playerEngine(interval?: number) {\r\n\r\n    return rxInterval(interval).pipe(\r\n      takeWhile(() => this.state.getValue().play || false),\r\n      tap(() => this.next()),\r\n      finalize(() => this.state.next(Object.assign({}, this.state.getValue(), { play: false }))));\r\n\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\r\nimport { GalleryService } from '../../service/gallery.service';\r\n\r\n@Component({\r\n  selector: 'gallery',\r\n  template: '<gallery-main *ngIf=\"gallery.state | async as state\" [state]=\"state\" [config]=\"gallery.config\"></gallery-main>',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./gallery.component.scss']\r\n})\r\nexport class GalleryComponent implements OnDestroy {\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.gallery.reset();\r\n  }\r\n\r\n}\r\n","import { Component, ElementRef, Input, OnInit, Renderer2, ChangeDetectionStrategy } from '@angular/core';\r\nimport { GalleryService } from '../../service/gallery.service';\r\nimport { GalleryState } from '../../service/gallery.state';\r\nimport { GalleryBulletConfig } from '../../config';\r\n\r\n@Component({\r\n  selector: 'gallery-bullets',\r\n  templateUrl: './gallery-bullets.component.html',\r\n  styleUrls: ['./gallery-bullets.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryBulletsComponent implements OnInit {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryBulletConfig;\r\n\r\n  constructor(public gallery: GalleryService, private renderer: Renderer2, private el: ElementRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.config.position) {\r\n\r\n      let contDirection, conWidth, conHeight, contTop;\r\n      let hostRight = 'unset', hostBottom = 'unset';\r\n      switch (this.config.position) {\r\n        case 'bottom':\r\n          contDirection = 'row';\r\n          conHeight = 'auto';\r\n          conWidth = '100%';\r\n          contTop = 'unset';\r\n          hostBottom = '0';\r\n          break;\r\n        case 'left':\r\n          contDirection = 'column';\r\n          conWidth = 'auto';\r\n          conHeight = '100%';\r\n          break;\r\n        case 'right':\r\n          conWidth = 'auto';\r\n          conHeight = '100%';\r\n          contDirection = 'column';\r\n          hostRight = '0';\r\n          break;\r\n        default:\r\n          // top\r\n          contDirection = 'row';\r\n          conHeight = 'auto';\r\n          conWidth = '100%';\r\n          break;\r\n      }\r\n\r\n      this.renderer.setStyle(this.el.nativeElement, 'right', hostRight);\r\n      this.renderer.setStyle(this.el.nativeElement, 'bottom', hostBottom);\r\n      this.renderer.setStyle(this.el.nativeElement, 'width', conWidth);\r\n      this.renderer.setStyle(this.el.nativeElement, 'height', conHeight);\r\n      this.renderer.setStyle(this.el.nativeElement, 'flex-direction', contDirection);\r\n    }\r\n  }\r\n\r\n}\r\n","import { transition, state, trigger, style, animate } from '@angular/animations';\r\nexport const animation: any = [\r\n  trigger('imgAnimate', [\r\n    state('fade', style({ opacity: 1 })),\r\n    transition('none => fade', [\r\n      style({\r\n        opacity: 0\r\n      }),\r\n      animate('0.5s ease-in')\r\n    ])\r\n  ])\r\n];\r\n// export const animation: AnimationEntryMetadata = [\r\n//   trigger('imgIn', [\r\n//     state('none', style({ opacity: 1 })),\r\n//     state('slideRight', style({ transform: 'translate3d(0, 0, 0)' })),\r\n//     state('slideLeft', style({ transform: 'translate3d(0, 0, 0)' })),\r\n//     transition('slideLeft <=> *', [\r\n//       style({\r\n//         transform: 'translate3d(100%, 0, 0)'\r\n//       }),\r\n//       animate('0.5s ease-in')\r\n//     ]),\r\n//     transition('slideRight <=> *', [\r\n//       style({\r\n//         transform: 'translate3d(-100%, 0, 0)'\r\n//       }),\r\n//       animate('0.5s ease-in')\r\n//     ]),\r\n//     transition('fade <=> *', [\r\n//       style({\r\n//         opacity: 0\r\n//       }),\r\n//       animate('0.5s ease-in')\r\n//     ]),\r\n//   ]),\r\n//   trigger('imgOut', [\r\n//     state('slideRight', style({ transform: 'translate3d(100%, 0, 0)' })),\r\n//     state('slideLeft', style({ transform: 'translate3d(-100%, 0, 0)' })),\r\n//     state('fade', style({ opacity: 0 })),\r\n//     state('none', style({ opacity: 1 })),\r\n//     transition('slideLeft <=> *', [\r\n//       style({\r\n//         transform: 'translate3d(0, 0, 0)'\r\n//       }),\r\n//       animate('0.5s ease-in')\r\n//     ]),\r\n//     transition('slideRight <=> *', [\r\n//       style({\r\n//         transform: 'translate3d(0, 0, 0)'\r\n//       }),\r\n//       animate('0.5s ease-in')\r\n//     ]),\r\n//     transition('fade <=> *', [\r\n//       style({\r\n//         opacity: 1\r\n//       }),\r\n//       animate('1s ease-in')\r\n//     ]),\r\n//   ]),\r\n// ];\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  OnInit,\r\n  Input,\r\n  ElementRef,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport { GalleryState } from '../../service/gallery.state';\r\nimport { GalleryConfig } from '../../config';\r\nimport { GalleryService } from '../../service/gallery.service';\r\nimport { animation } from './gallery-image.animation';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-image',\r\n  templateUrl: './gallery-image.component.html',\r\n  styleUrls: ['./gallery-image.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: animation\r\n})\r\nexport class GalleryImageComponent implements OnInit {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  loading: boolean;\r\n  animate: string;\r\n\r\n  constructor(public gallery: GalleryService, private el: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    /** Enable gestures */\r\n    if (this.config.gestures) {\r\n      if (typeof Hammer === 'undefined') {\r\n\r\n        throw Error('[NgGallery]: HammerJS is undefined, make sure it is loaded');\r\n      } else {\r\n\r\n        const el = this.el.nativeElement;\r\n        const mc = new Hammer(el);\r\n\r\n        mc.on('panstart', () => {\r\n          this.renderer.removeClass(el, 'g-pan-reset');\r\n        });\r\n        mc.on('panend', () => {\r\n          this.renderer.addClass(el, 'g-pan-reset');\r\n        });\r\n        mc.on('pan', (e: any) => {\r\n          this.renderer.setStyle(el, 'transform', `translate3d(${e.deltaX}px, 0px, 0px)`);\r\n        });\r\n        /** Swipe next and prev */\r\n        mc.on('swipeleft', () => {\r\n          this.gallery.next();\r\n        });\r\n        mc.on('swiperight', () => {\r\n          this.gallery.prev();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  imageLoad(done: boolean) {\r\n    this.loading = !done;\r\n    /** TODO: Add some animation */\r\n    \r\n    if (!done) {\r\n      this.animate = 'none';\r\n    } else {\r\n      switch (this.config.animation) {\r\n        case 'fade':\r\n          this.animate = 'fade';\r\n          break;\r\n        default:\r\n          this.animate = 'none';\r\n      }\r\n      //     this.animate = 'none';\r\n      //   case 'slide':\r\n      //     this.animate = (this.state.currIndex > this.state.prevIndex) ? 'slideLeft' : 'slideRight';\r\n      //     break;\r\n      //   default:\r\n      //     this.animate = 'none';\r\n    }\r\n\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\nimport { GalleryService } from '../../service/gallery.service';\r\nimport { GalleryLoaderConfig } from '../../config';\r\n\r\n@Component({\r\n  selector: 'gallery-loader',\r\n  templateUrl: './gallery-loader.component.html',\r\n  styleUrls: ['./gallery-loader.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryLoaderComponent implements OnInit {\r\n\r\n  @Input() config: GalleryLoaderConfig;\r\n  icon: any;\r\n  styles: any;\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.icon = this.getIcon();\r\n    this.styles = this.getStyle();\r\n  }\r\n\r\n  getIcon() {\r\n    switch (this.config.icon) {\r\n      case 'puff':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/puff.svg';\r\n\r\n      case 'spinning-circles':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/ball-triangle.svg';\r\n\r\n      case 'three-dots':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/three-dots.svg';\r\n\r\n      case 'oval':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/oval.svg';\r\n\r\n      case 'ball-triangle':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/ball-triangle.svg';\r\n\r\n      case 'bars':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/bars.svg';\r\n\r\n      case 'tail-spin':\r\n        return 'https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/tail-spin.svg';\r\n\r\n      default:\r\n        return this.config.icon;\r\n    }\r\n  }\r\n\r\n  getStyle() {\r\n    switch (this.config.position) {\r\n      case 'topLeft':\r\n        return {\r\n          'align-items': 'flex-start',\r\n          'justify-content': 'flex-start'\r\n        };\r\n\r\n      case 'topRight':\r\n        return {\r\n          'align-items': 'flex-start',\r\n          'justify-content': 'flex-end'\r\n        };\r\n      case 'bottomLeft':\r\n        return {\r\n          'align-items': 'flex-end',\r\n          'justify-content': 'flex-start'\r\n        };\r\n      case 'bottomRight':\r\n        return {\r\n          'align-items': 'flex-end',\r\n          'justify-content': 'flex-end'\r\n        };\r\n\r\n      default:\r\n        return {\r\n          'align-items': 'center',\r\n          'justify-content': 'center'\r\n        };\r\n    }\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { GalleryState } from '../../service/gallery.state';\r\nimport { GalleryConfig } from '../../config';\r\nimport { GalleryService } from '../../service/gallery.service';\r\n\r\n@Component({\r\n  selector: 'gallery-main',\r\n  templateUrl: './gallery-main.component.html',\r\n  styleUrls: ['./gallery-main.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GalleryMainComponent implements OnInit {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  loading: any;\r\n  thumbDirection: any;\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    // shortcut for thumbnail config\r\n    const thumbPos = this.config.thumbnails ? this.config.thumbnails.position : 0;\r\n    this.thumbDirection = (thumbPos === 'left' || thumbPos === 'right') ? 'row' : 'column';\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, HostListener, Input, OnDestroy } from '@angular/core';\r\nimport { transition, state, trigger, style, animate } from '@angular/animations';\r\nimport { GalleryService } from '../../service/gallery.service';\r\n\r\n@Component({\r\n  selector: 'gallery-modal',\r\n  templateUrl: './gallery-modal.component.html',\r\n  styleUrls: ['./gallery-modal.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('popup', [\r\n      state('in', style({ opacity: 0.8 , transform: 'scale(0.2) translate3d(0, 100px, 0)'})),\r\n      transition('void => *', [\r\n        style({  opacity: 0.8 , transform: 'scale(0.2) translate3d(0, 100px, 0)' }),\r\n        animate(300)\r\n      ]),\r\n      transition('* => void', [\r\n        animate(300, style({  opacity: 1 , transform: 'scale(1)  translate3d(0, 0, 0)' }))\r\n      ])\r\n    ])]\r\n})\r\nexport class GalleryModalComponent implements OnDestroy {\r\n\r\n  @Input() closeButton = true;\r\n  \r\n\r\n  /** Activate keyboard for navigation */\r\n  @HostListener('body:keydown', ['$event'])\r\n  keyboardInput(event: KeyboardEvent) {\r\n    if (!this.gallery.state.getValue().active){\r\n      return;\r\n    }\r\n    event.stopPropagation();\r\n    switch (event.keyCode) {\r\n      case 37:  // prev\r\n        this.gallery.prev();\r\n        break;\r\n      case 39:  // next\r\n        this.gallery.next();\r\n        break;\r\n      case 13:  // enter\r\n        this.gallery.next();\r\n        break;\r\n      case 27:  // esc\r\n        this.gallery.close();\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.gallery.reset();\r\n  }\r\n\r\n}\r\n","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\r\nimport {GalleryService} from '../../service/gallery.service';\r\n\r\n@Component({\r\n  selector: 'gallery-nav',\r\n  templateUrl: './gallery-nav.component.html',\r\n  styleUrls: ['./gallery-nav.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryNavComponent {\r\n\r\n  @Input() state: any;\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\nimport { GalleryService } from '../../service/gallery.service';\r\nimport { GalleryPlayConfig } from '../../config';\r\nimport { GalleryState } from '../../service/gallery.state';\r\n\r\n@Component({\r\n  selector: 'gallery-player',\r\n  templateUrl: './gallery-player.component.html',\r\n  styleUrls: ['./gallery-player.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryPlayerComponent implements OnInit {\r\n\r\n  @Input() config: GalleryPlayConfig;\r\n  @Input() state: GalleryState;\r\n\r\n  constructor(public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    /** Start auto-play if enabled */\r\n    if (this.config.autoplay) {\r\n      this.gallery.play();\r\n    }\r\n\r\n    /** TODO: Display status bar */\r\n  }\r\n\r\n}\r\n","import {Component, Input, OnInit, ElementRef, Renderer2, ChangeDetectionStrategy} from '@angular/core';\r\nimport {GalleryState} from '../../service/gallery.state';\r\nimport {GalleryDescConfig} from '../../config';\r\n\r\n@Component({\r\n  selector: 'gallery-text',\r\n  templateUrl: './gallery-text.component.html',\r\n  styleUrls: ['./gallery-text.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryTextComponent implements OnInit {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryDescConfig;\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const el = this.el.nativeElement;\r\n    // text overlay\r\n    if (this.config.overlay) {\r\n      this.renderer.setStyle(el, 'position', 'absolute');\r\n    }\r\n\r\n    // text position\r\n    if (this.config.position === 'top') {\r\n      this.renderer.setStyle(el, 'order', 0);\r\n      this.renderer.setStyle(el, 'top', 0);\r\n      this.renderer.setStyle(el, 'bottom', 'unset');\r\n    } else {\r\n      this.renderer.setStyle(el, 'order', 2);\r\n      this.renderer.setStyle(el, 'top', 'unset');\r\n      this.renderer.setStyle(el, 'bottom', 0);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Component, Input, ChangeDetectionStrategy, ElementRef, Renderer2, OnInit\r\n} from '@angular/core';\r\n\r\nimport { get } from '../../utils/get';\r\nimport { GalleryService } from '../../service/gallery.service';\r\nimport { GalleryState } from '../../service/gallery.state';\r\nimport { GalleryThumbConfig } from '../../config';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-thumb',\r\n  templateUrl: './gallery-thumb.component.html',\r\n  styleUrls: ['./gallery-thumb.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GalleryThumbComponent implements OnInit {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryThumbConfig;\r\n\r\n  contStyle: any;\r\n\r\n  constructor(public gallery: GalleryService, private el: ElementRef, private renderer: Renderer2) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.contStyle = this.getContainerStyle();\r\n\r\n    /** Enable gestures */\r\n    if (this.gallery.config.gestures) {\r\n      if (typeof Hammer === 'undefined') {\r\n\r\n        throw Error('[NgGallery]: HammerJS is undefined, make sure it is loaded');\r\n      } else {\r\n        const el = this.el.nativeElement;\r\n        const mc = new Hammer(el);\r\n\r\n        mc.on('panstart', () => {\r\n          this.renderer.removeClass(el, 'g-pan-reset');\r\n        });\r\n        mc.on('panend', () => {\r\n          this.renderer.addClass(el, 'g-pan-reset');\r\n        });\r\n\r\n        /** Pan left and right */\r\n        mc.on('pan', (e: any) => {\r\n          this.renderer.setStyle(el, 'transform', `translate3d(${e.deltaX}px, 0px, 0px)`);\r\n        });\r\n        /** Swipe next and prev */\r\n        mc.on('swipeleft', () => {\r\n          this.gallery.next();\r\n        });\r\n        mc.on('swiperight', () => {\r\n          this.gallery.prev();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  translateThumbs() {\r\n    const x = get(this.state, 'currIndex', 0) * get(this.config, 'width', 0) + get(this.config, 'width', 0) / 2;\r\n    return `translate3d(${-x}px, 0, 0)`;\r\n  }\r\n\r\n  getContainerStyle() {\r\n    /** Set thumbnails position (top, bottom) */\r\n    const order = this.config.position === 'top' ? 0 : 2;\r\n    this.renderer.setStyle(this.el.nativeElement, 'order', order);\r\n\r\n    return {\r\n      height: this.config.height + 'px',\r\n      margin: this.config.space + 'px'\r\n    };\r\n  }\r\n\r\n  getThumbImage(i: number) {\r\n    /** Use thumbnail if presented */\r\n    let image = get(this.state, 'images', [])[i] || {};\r\n    return `url(${image.thumbnail || image.src})`;\r\n  }\r\n\r\n}\r\n","export function isEqual(array1: string[] = [], array2: string[] = []) {\r\n  if (array1.length !== array2.length) {\r\n    return false;\r\n  }\r\n\r\n  // array1 = array1.sort();\r\n  // array2 = array2.sort();\r\n\r\n  for (let i = array1.length; i--;) {\r\n    if (array1[i] !== array2[i]) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}","import { Directive, ElementRef, Renderer2, Input, OnInit } from '@angular/core';\r\nimport { GalleryService } from '../service/gallery.service';\r\nimport { GalleryImage } from '../service/gallery.state';\r\nimport { isEqual, pluck } from '../utils/index';\r\n\r\nimport { from } from 'rxjs';\r\nimport { map, finalize } from 'rxjs/operators';\r\n\r\n@Directive({\r\n  selector: '[gallerize]'\r\n})\r\nexport class GalleryDirective implements OnInit {\r\n\r\n  // A flag to check if content has changed\r\n  content: string;\r\n  srcList: string[] = [];\r\n\r\n  @Input() gallerize: string;\r\n  @Input() exclude: string;\r\n  @Input() subtree: string = '';\r\n  @Input() filter: Function;\r\n\r\n  constructor(public el: ElementRef, public renderer: Renderer2, public gallery: GalleryService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    let target = this.el.nativeElement;\r\n\r\n\r\n    var updateGallery = () => {\r\n\r\n      // skip if content is the same \r\n      if (!target || (this.content && this.content === target.innerText)) {\r\n        return;\r\n      }\r\n      else {\r\n        this.content = target.innerText;\r\n      }\r\n\r\n      const images: GalleryImage[] = [];\r\n\r\n      // get all img elements from content\r\n      const imageElements = target.querySelectorAll(this.subtree + ` img${this.gallerize}`)\r\n\r\n      if (!imageElements || !imageElements.length) {\r\n        this.srcList = [];\r\n        return;\r\n      }\r\n\r\n      let srcs = Array.from(imageElements).map((elem: HTMLImageElement) => {\r\n        return elem.dataset && elem.dataset.originalImageUrl ? elem.dataset.originalImageUrl : elem.src\r\n      })\r\n      //let srcs = pluck(imageElements, 'src');\r\n      let isSame = isEqual(this.srcList, srcs);\r\n      this.srcList = srcs;\r\n      from(imageElements).pipe(map((img: HTMLImageElement, i) => {\r\n        // add click event to the images\r\n        let src = img.dataset && img.dataset.originalImageUrl ? img.dataset.originalImageUrl : img.src;\r\n        this.renderer.setStyle(img, 'cursor', 'pointer');\r\n        if (!this.filter || this.filter(img)) {\r\n          this.renderer.setProperty(img, 'onclick', () => {\r\n            if (this.srcList.indexOf(src) !== -1) {\r\n              this.gallery.set(i);\r\n            }\r\n\r\n          });\r\n        }\r\n\r\n        // create an image item\r\n        images.push({\r\n          src: src,\r\n          text: img.alt\r\n        });\r\n      }),\r\n        finalize(() => {\r\n          if (!isSame) {\r\n            this.gallery.load(images)\r\n          }\r\n        }))\r\n        .subscribe();\r\n    }\r\n    // create an observer instance\r\n    var observer = new MutationObserver(updateGallery);\r\n\r\n    var config = { subtree: true, childList: true }\r\n    observer.observe(target, config);\r\n    updateGallery();\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { switchMap, tap, takeWhile, finalize } from 'rxjs/operators';\r\n\r\n\r\n@Directive({\r\n  selector: '[lazyImage]'\r\n})\r\nexport class LazyDirective {\r\n\r\n  // Image source\r\n  @Input('lazyImage') set lazyImage(imagePath: string) {\r\n    this.getImage(imagePath);\r\n  }\r\n\r\n  /** A subject to emit only last selected image */\r\n  lazyWorker = new Subject<string>();\r\n\r\n  @Output() lazyLoad = new EventEmitter<boolean>(false);\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2) {\r\n\r\n    // this.lazyTest.switchMap((done) => (done) ? Observable.of(done).delay(1000) : Observable.of(done)\r\n    this.lazyWorker.pipe(switchMap((done) => of(done)))\r\n      .subscribe((img) => {\r\n        if (img) {\r\n          this.renderer.setProperty(this.el.nativeElement, 'src', img);\r\n          this.lazyLoad.emit(true)\r\n        } else {\r\n          this.lazyLoad.emit(false);\r\n        }\r\n      });\r\n  }\r\n\r\n  getImage(imagePath: string) {\r\n    this.lazyWorker.next('');\r\n    const img = this.renderer.createElement('img');\r\n    img.src = imagePath;\r\n\r\n    img.onload = () => {\r\n      this.lazyWorker.next(imagePath);\r\n    };\r\n\r\n    img.onerror = (err: any) => {\r\n      console.error('[GalleryLazyDirective]:', err);\r\n      this.lazyWorker.next('');\r\n    };\r\n  }\r\n\r\n}\r\n\r\n","/** This directive enable tap if HammerJS is loaded, otherwise it uses the normal click event (useful for thumbnail click) */\r\n\r\nimport { Directive, ElementRef, EventEmitter, Input, OnInit, Output, Renderer2 } from '@angular/core';\r\nimport { GalleryService } from '../service/gallery.service';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Directive({\r\n  selector: '[tap]'\r\n})\r\nexport class TapDirective implements OnInit {\r\n\r\n  @Input() tap: any;\r\n  @Output() tapClick = new EventEmitter();\r\n\r\n  constructor(private gallery: GalleryService, private el: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.setTapEvent();\r\n  }\r\n\r\n  /** Enable gestures if hammer is loaded */\r\n  setTapEvent() {\r\n\r\n    if (this.gallery.config.gestures) {\r\n      if (typeof Hammer === 'undefined') {\r\n\r\n        throw Error('[NgGallery]: HammerJS is undefined, make sure it is loaded');\r\n      } else {\r\n        /** Use tap for click event */\r\n        if (typeof Hammer !== 'undefined') {\r\n          const mc = new Hammer(this.el.nativeElement);\r\n          mc.on('tap', () => {\r\n            this.tapClick.emit();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      /** Use normal click event */\r\n      this.renderer.setProperty(this.el.nativeElement, 'onclick', () => {\r\n        this.tapClick.emit();\r\n      });\r\n    }\r\n\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { GalleryService } from './service/gallery.service';\r\nimport { GalleryConfig } from './config/gallery.config';\r\n\r\nimport { GalleryComponent } from './component/gallery/gallery.component';\r\nimport { GalleryNavComponent } from './component/gallery-nav/gallery-nav.component';\r\nimport { GalleryThumbComponent } from './component/gallery-thumb/gallery-thumb.component';\r\nimport { GalleryTextComponent } from './component/gallery-text/gallery-text.component';\r\nimport { GalleryImageComponent } from './component/gallery-image/gallery-image.component';\r\nimport { GalleryLoaderComponent } from './component/gallery-loader/gallery-loader.component';\r\nimport { GalleryModalComponent } from './component/gallery-modal/gallery-modal.component';\r\nimport { GalleryBulletsComponent } from './component/gallery-bullets/gallery-bullets.component';\r\nimport { GalleryPlayerComponent } from './component/gallery-player/gallery-player.component';\r\nimport { GalleryMainComponent } from './component/gallery-main/gallery-main.component';\r\n\r\nimport { GalleryDirective } from './directive/gallery.directive';\r\nimport { LazyDirective } from './directive/lazy.directive';\r\nimport { TapDirective } from './directive/tap.directive';\r\n\r\n/** Initialize ConfigService with URL */\r\nexport function galleryFactory(config: GalleryConfig) {\r\n  return new GalleryService(config);\r\n}\r\n\r\nexport const CONFIG = new InjectionToken<GalleryConfig>('config');\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    GalleryComponent,\r\n    GalleryNavComponent,\r\n    GalleryThumbComponent,\r\n    GalleryDirective,\r\n    GalleryTextComponent,\r\n    GalleryImageComponent,\r\n    GalleryLoaderComponent,\r\n    GalleryModalComponent,\r\n    GalleryBulletsComponent,\r\n    GalleryPlayerComponent,\r\n    GalleryMainComponent,\r\n    TapDirective,\r\n    LazyDirective\r\n  ],\r\n  exports: [\r\n    GalleryComponent,\r\n    GalleryDirective,\r\n    GalleryModalComponent\r\n  ]\r\n})\r\nexport class GalleryModule {\r\n  static forRoot(config?: GalleryConfig): ModuleWithProviders {\r\n\r\n    return {\r\n      ngModule: GalleryModule,\r\n      providers: [\r\n        { provide: CONFIG, useValue: config },\r\n        {\r\n          provide: GalleryService,\r\n          useFactory: galleryFactory,\r\n          deps: [CONFIG]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\n"],"names":["interval","state","rxInterval"],"mappings":"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"}
