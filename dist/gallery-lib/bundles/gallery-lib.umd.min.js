!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/animations"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("gallery-lib",["exports","@angular/animations","@angular/common","rxjs","rxjs/operators","@angular/core"],t):t(e["gallery-lib"]={},e.ng.animations,e.ng.common,e.rxjs,e.rxjs.operators,e.ng.core)}(this,function(e,t,n,o,s,r){"use strict";var i={images:undefined,prevIndex:0,currIndex:0,hasNext:undefined,hasPrev:undefined,active:!1},a={style:{background:"#121519",width:"900px",height:"500px"},animation:"fade",loader:{width:"50px",height:"50px",position:"center",icon:"oval"},description:{position:"bottom",overlay:!1,text:!0,counter:!0,style:{color:"red"}},player:{autoplay:!1,speed:3e3},thumbnails:{width:120,height:90,position:"left",space:30}};function l(e,t,n){if(void 0===n&&(n=undefined),!e||!t)return n;for(var r=t.split("."),i=e,a=0;a<r.length;a++){if(!i[r[a]])return n;i=i[r[a]]}return i||n}var c=(g.prototype.load=function(e){this.state.next({images:e,currIndex:0,hasNext:1<e.length,hasPrev:!1,active:!1})},g.prototype.set=function(e){var t=this.state.getValue();this.state.next(Object.assign({},t,{prevIndex:t.currIndex,currIndex:e,hasNext:e<l(t,"images.length",0)-1,hasPrev:0<e,active:!0}))},g.prototype.next=function(){var e,t=this.state.getValue();t.hasNext?(e=(t.currIndex||0)+1,this.set(e)):this.set(0)},g.prototype.prev=function(){var e,t=this.state.getValue();t.hasPrev?(e=(t.currIndex||0)-1,this.set(e)):this.set(l(t,"images.length",0)-1)},g.prototype.close=function(){var e=this.state.getValue();this.state.next(Object.assign({},e,{active:!1,play:!1})),this.stop()},g.prototype.reset=function(){this.state.next(i),this.stop()},g.prototype.play=function(e){var t=e||l(this.config,"player.speed",0)||2e3,n=this.state.getValue();this.state.next(Object.assign({},n,{play:!0,active:!0})),this.player.next(t)},g.prototype.stop=function(){this.player.next(0)},g.prototype.playerEngine=function(e){var t=this;return o.interval(e).pipe(s.takeWhile(function(){return t.state.getValue().play||!1}),s.tap(function(){return t.next()}),s.finalize(function(){return t.state.next(Object.assign({},t.state.getValue(),{play:!1}))}))},g.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Optional}]}]},g);function g(e){var t=this;this.config=a,this.state=new o.BehaviorSubject(i),this.config=Object.assign({},a,e),this.player=new o.Subject,this.player.pipe(s.switchMap(function(e){return e?t.playerEngine(e):o.of(null)})).subscribe()}var p=(d.prototype.ngOnDestroy=function(){this.gallery.reset()},d.decorators=[{type:r.Component,args:[{selector:"gallery",template:'<gallery-main *ngIf="gallery.state | async as state" [state]="state" [config]="gallery.config"></gallery-main>',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["gallery-main{display:flex;height:500px}"]}]}],d.ctorParameters=function(){return[{type:c}]},d);function d(e){this.gallery=e}var y=(u.prototype.ngOnInit=function(){if(this.config.position){var e=void 0,t=void 0,n=void 0,r="unset",i="unset";switch(this.config.position){case"bottom":e="row",n="auto",t="100%",i="0";break;case"left":e="column",t="auto",n="100%";break;case"right":t="auto",n="100%",e="column",r="0";break;default:e="row",n="auto",t="100%"}this.renderer.setStyle(this.el.nativeElement,"right",r),this.renderer.setStyle(this.el.nativeElement,"bottom",i),this.renderer.setStyle(this.el.nativeElement,"width",t),this.renderer.setStyle(this.el.nativeElement,"height",n),this.renderer.setStyle(this.el.nativeElement,"flex-direction",e)}},u.decorators=[{type:r.Component,args:[{selector:"gallery-bullets",template:'<div class="g-bullet"\r\n     *ngFor="let image of state.images; let i = index"\r\n     [class.g-bullet-curr]="i === state.currIndex"\r\n     (click)="gallery.set(i)">\r\n\r\n  <div class="g-bullet-inner" [ngStyle]="config.style"></div>\r\n\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{position:absolute;display:flex;align-items:center;justify-content:center}.g-bullet{cursor:pointer;display:flex;z-index:300}.g-bullet-inner{margin:1em;height:4px;width:4px;background-color:rgba(255,255,255,.5);border-radius:2px;box-shadow:0 0 6px rgba(0,0,0,.8);transition:.2s}.g-bullet-curr .g-bullet-inner{transform:scale(1.5);background-color:#fff}"]}]}],u.ctorParameters=function(){return[{type:c},{type:r.Renderer2},{type:r.ElementRef}]},u.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}]},u);function u(e,t,n){this.gallery=e,this.renderer=t,this.el=n}var m=[t.trigger("imgAnimate",[t.state("fade",t.style({opacity:1})),t.transition("none => fade",[t.style({opacity:0}),t.animate("0.5s ease-in")])])],h=(f.prototype.ngOnInit=function(){var t=this;if(this.config.gestures){if("undefined"==typeof Hammer)throw Error("[NgGallery]: HammerJS is undefined, make sure it is loaded");var n=this.el.nativeElement,e=new Hammer(n);e.on("panstart",function(){t.renderer.removeClass(n,"g-pan-reset")}),e.on("panend",function(){t.renderer.addClass(n,"g-pan-reset")}),e.on("pan",function(e){t.renderer.setStyle(n,"transform","translate3d("+e.deltaX+"px, 0px, 0px)")}),e.on("swipeleft",function(){t.gallery.next()}),e.on("swiperight",function(){t.gallery.prev()})}},f.prototype.imageLoad=function(e){if(this.loading=!e,e)switch(this.config.animation){case"fade":this.animate="fade";break;default:this.animate="none"}else this.animate="none"},f.decorators=[{type:r.Component,args:[{selector:"gallery-image",template:'<div [@imgAnimate]="animate" class="g-image">\r\n  <img [lazyImage]="state.images[state.currIndex].src" (lazyLoad)="imageLoad($event)">\r\n</div>\r\n\r\n<gallery-loader *ngIf="loading" [config]="config.loader"></gallery-loader>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,animations:m,styles:[":host{order:1;flex:1;display:flex;flex-direction:column;transform:translate3d(0,0,0)}.g-image{position:absolute;left:0;right:0;top:0;bottom:0;background-repeat:no-repeat;background-size:contain;background-position:center center;z-index:3;display:flex;flex-direction:column;justify-content:center;align-items:center}.g-image img{box-shadow:0 0 4px rgba(0,0,0,.3);pointer-events:none;display:block;max-width:100%;max-height:100%}"]}]}],f.ctorParameters=function(){return[{type:c},{type:r.ElementRef},{type:r.Renderer2}]},f.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}]},f);function f(e,t,n){this.gallery=e,this.el=t,this.renderer=n}var v=(b.prototype.ngOnInit=function(){this.icon=this.getIcon(),this.styles=this.getStyle()},b.prototype.getIcon=function(){switch(this.config.icon){case"puff":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/puff.svg";case"spinning-circles":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/ball-triangle.svg";case"three-dots":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/three-dots.svg";case"oval":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/oval.svg";case"ball-triangle":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/ball-triangle.svg";case"bars":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/bars.svg";case"tail-spin":return"https://cdn.rawgit.com/SamHerbert/SVG-Loaders/75b65ef5/svg-loaders/tail-spin.svg";default:return this.config.icon}},b.prototype.getStyle=function(){switch(this.config.position){case"topLeft":return{"align-items":"flex-start","justify-content":"flex-start"};case"topRight":return{"align-items":"flex-start","justify-content":"flex-end"};case"bottomLeft":return{"align-items":"flex-end","justify-content":"flex-start"};case"bottomRight":return{"align-items":"flex-end","justify-content":"flex-end"};default:return{"align-items":"center","justify-content":"center"}}},b.decorators=[{type:r.Component,args:[{selector:"gallery-loader",template:'<div class="g-loader" [ngStyle]="styles">\r\n  <img [src]="icon" [style.width]="config.width" [style.height]="config.height"/>\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["*{box-sizing:border-box}:host{z-index:2040}.g-loader{z-index:2050;position:absolute;width:100%;height:100%;display:flex;padding:1em}"]}]}],b.ctorParameters=function(){return[{type:c}]},b.propDecorators={config:[{type:r.Input}]},b);function b(e){this.gallery=e}var x=(I.prototype.ngOnInit=function(){var e=this.config.thumbnails?this.config.thumbnails.position:0;this.thumbDirection="left"===e||"right"===e?"row":"column"},I.decorators=[{type:r.Component,args:[{selector:"gallery-main",template:'<div class="g-container" [style.flexDirection]="thumbDirection" [ngStyle]="config.style">\r\n\r\n  <gallery-thumb *ngIf="config.thumbnails" [state]="state" [config]="config.thumbnails"\r\n                 [style.background]="config.style?.background"></gallery-thumb>\r\n\r\n  <div class="g-box">\r\n\r\n    <div class="g-image-box">\r\n\r\n      <gallery-image [state]="state" [config]="config" (loading)="loading = $event"></gallery-image>\r\n\r\n      <gallery-nav *ngIf="config.navigation" [state]="state"></gallery-nav>\r\n\r\n      \x3c!--<div class="g-layer" *ngIf="state.images[state.currIndex].layer" [innerHtml]="state.images[state.currIndex].layer"></div>--\x3e\r\n\r\n    </div>\r\n\r\n    <gallery-text *ngIf="config.description" [state]="state" [config]="config.description"></gallery-text>\r\n\r\n    <gallery-bullets *ngIf="config.bullets" [state]="state" [config]="config.bullets"></gallery-bullets>\r\n\r\n    <gallery-player *ngIf="config.player" [state]="state" [config]="config.player"></gallery-player>\r\n\r\n  </div>\r\n\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,styles:["gallery-main{flex:1;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}gallery-main *{box-sizing:border-box}.g-container{overflow:hidden;position:relative;z-index:200;max-height:100%;max-width:100%;display:flex;flex-direction:column}@media (max-width:480px){.g-container{width:100%!important;flex:1;flex-direction:column!important}}.g-box,.g-image-box{position:relative;display:flex;flex-direction:column;flex:1;order:1;height:100%}.g-layer{position:absolute;left:0;top:0;right:0;bottom:0;z-index:250}.g-pan-reset{transition:.3s linear;transform:translate3d(0,0,0)!important}"]}]}],I.ctorParameters=function(){return[{type:c}]},I.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}]},I);function I(e){this.gallery=e}var w=(S.prototype.keyboardInput=function(e){if(this.gallery.state.getValue().active)switch(e.stopPropagation(),e.keyCode){case 37:this.gallery.prev();break;case 39:case 13:this.gallery.next();break;case 27:this.gallery.close();break;default:return}},S.prototype.ngOnDestroy=function(){this.gallery.reset()},S.decorators=[{type:r.Component,args:[{selector:"gallery-modal",template:'<div *ngIf="gallery.state | async as state">\r\n\r\n  <div *ngIf="state.active" class="g-modal">\r\n\r\n    <div class="g-btn-close-container">\r\n      <div *ngIf="closeButton" class="g-btn-close" (click)="gallery.close()"></div>\r\n    </div>\r\n\r\n    <gallery-main [@popup] [state]="state" [config]="gallery.config"></gallery-main>\r\n\r\n    <div class="g-overlay" (click)="gallery.close()"></div>\r\n\r\n  </div>\r\n\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,animations:[t.trigger("popup",[t.state("in",t.style({opacity:.8,transform:"scale(0.2) translate3d(0, 100px, 0)"})),t.transition("void => *",[t.style({opacity:.8,transform:"scale(0.2) translate3d(0, 100px, 0)"}),t.animate(300)]),t.transition("* => void",[t.animate(300,t.style({opacity:1,transform:"scale(1)  translate3d(0, 0, 0)"}))])])],styles:["*{box-sizing:border-box}.g-modal{position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.6);z-index:1000;overflow:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center}.g-overlay{position:absolute;left:0;right:0;top:0;bottom:0}.g-btn-close-container{width:100%;display:flex}@media (max-width:480px){.g-modal{padding:0}.g-btn-close-container{justify-content:flex-end}.g-btn-close-container .g-btn-close{margin:.5em;position:relative;right:0;top:0}}.g-btn-close{position:absolute;right:1em;top:1em;z-index:9999;cursor:pointer;width:30px;height:30px;transition:.2s linear;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUwIDUwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MCA1MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxjaXJjbGUgc3R5bGU9ImZpbGw6I0Q3NUE0QTsiIGN4PSIyNSIgY3k9IjI1IiByPSIyNSIvPjxwb2x5bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwOyIgcG9pbnRzPSIxNiwzNCAyNSwyNSAzNCwxNiAiLz48cG9seWxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I0ZGRkZGRjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDsiIHBvaW50cz0iMTYsMTYgMjUsMjUgMzQsMzQgIi8+PC9zdmc+)}.g-btn-close:active{transform:rotate(180deg) scale(.9)}"]}]}],S.ctorParameters=function(){return[{type:c}]},S.propDecorators={closeButton:[{type:r.Input}],keyboardInput:[{type:r.HostListener,args:["body:keydown",["$event"]]}]},S);function S(e){this.gallery=e,this.closeButton=!0}var z=(D.decorators=[{type:r.Component,args:[{selector:"gallery-nav",template:'<div *ngIf="state.images.length > 1" class="g-nav">\r\n\r\n  <div class="g-nav-prev" (click)="gallery.prev()">\r\n    <i class="prev-arrow-ico"></i>\r\n  </div>\r\n\r\n  <div class="g-nav-next" (click)="gallery.next()">\r\n    <i class="next-arrow-ico"></i>\r\n  </div>\r\n\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["*{box-sizing:border-box}:host{z-index:201;position:absolute;left:0;right:0;top:0;bottom:0;display:flex}@media (max-width:480px){:host{display:none}}.g-nav{flex:1;height:100%;display:flex;flex-direction:row;opacity:0;transition:.4s linear;cursor:pointer}.g-nav:hover{opacity:1}.g-nav-next,.g-nav-prev{display:flex;align-items:center;height:100%;opacity:.7;position:relative;overflow:hidden;transition:.2s;z-index:0}.g-nav-next:hover,.g-nav-prev:hover{opacity:1}.g-nav-next{padding-right:.7em;flex:1;justify-content:flex-end}.g-nav-prev{padding-left:.7em;width:20%}.next-arrow-ico,.prev-arrow-ico{width:45px;height:80px}.next-arrow-ico{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PiAgPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQxNC40OTYgNDE0LjQ5NiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDE0LjQ5NiA0MTQuNDk2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxkZWZzIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGZpbHRlciBpZD0iZHJvcHNoYWRvdyIgPiAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VBbHBoYSIgc3RkRGV2aWF0aW9uPSIzIi8+ICAgPGZlT2Zmc2V0IGR4PSIyIiBkeT0iMiIgcmVzdWx0PSJvZmZzZXRibHVyIi8+ICAgPGZlTWVyZ2U+IDxmZU1lcmdlTm9kZS8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+ICAgPC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz4gIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiNmZmY7IiBmaWx0ZXI9InVybCgjZHJvcHNoYWRvdykiIHBvaW50cz0iMTE4LjEyNiwwIDg5Ljc5NiwyOC4yMzggMjY4LjIyMywyMDcuMjQ4IDg5Ljc5NiwzODYuMjU4IDExOC4xMjYsNDE0LjQ5NiAzMjQuNywyMDcuMjQ4ICIvPjwvc3ZnPg==) center center no-repeat}.prev-arrow-ico{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0MTQuNDk2IDQxNC40OTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQxNC40OTYgNDE0LjQ5NjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxkZWZzIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGZpbHRlciBpZD0iZHJvcHNoYWRvdyIgPiAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VBbHBoYSIgc3RkRGV2aWF0aW9uPSIzIi8+ICAgPGZlT2Zmc2V0IGR4PSIyIiBkeT0iMiIgcmVzdWx0PSJvZmZzZXRibHVyIi8+ICAgPGZlTWVyZ2U+IDxmZU1lcmdlTm9kZS8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+ICAgPC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48cG9seWdvbiBzdHlsZT0iZmlsbDojZmZmOyIgZmlsdGVyPSJ1cmwoI2Ryb3BzaGFkb3cpIiBwb2ludHM9IjMyNC43LDI4LjIzOCAyOTYuMzcsMCA4OS43OTYsMjA3LjI0OCAyOTYuMzcsNDE0LjQ5NiAzMjQuNywzODYuMjU4IDE0Ni4yNzMsMjA3LjI0OCAiLz48L3N2Zz4=) center center no-repeat}"]}]}],D.ctorParameters=function(){return[{type:c}]},D.propDecorators={state:[{type:r.Input}]},D);function D(e){this.gallery=e}var Z=(P.prototype.ngOnInit=function(){this.config.autoplay&&this.gallery.play()},P.decorators=[{type:r.Component,args:[{selector:"gallery-player",template:'\x3c!--<div class="g-player-btns">--\x3e\r\n  \x3c!--<div *ngIf="!state.play" class="g-player-btn" (click)="gallery.play()">▶</div>--\x3e\r\n  \x3c!--<div *ngIf="state.play" class="g-player-btn" (click)="gallery.stop()">⏸</div>--\x3e\r\n\x3c!--</div>--\x3e\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{position:absolute;z-index:310}.g-player-btns{display:flex;padding:.5em 1em}.g-player-btn{margin-right:.5em;color:#fff;cursor:pointer}"]}]}],P.ctorParameters=function(){return[{type:c}]},P.propDecorators={config:[{type:r.Input}],state:[{type:r.Input}]},P);function P(e){this.gallery=e}var j=(G.prototype.ngOnInit=function(){var e=this.el.nativeElement;this.config.overlay&&this.renderer.setStyle(e,"position","absolute"),"top"===this.config.position?(this.renderer.setStyle(e,"order",0),this.renderer.setStyle(e,"top",0),this.renderer.setStyle(e,"bottom","unset")):(this.renderer.setStyle(e,"order",2),this.renderer.setStyle(e,"top","unset"),this.renderer.setStyle(e,"bottom",0))},G.decorators=[{type:r.Component,args:[{selector:"gallery-text",template:'<div class="g-text-container" [ngStyle]="config.style">\r\n  <div *ngIf="config.text" class="g-text" [innerHtml]="state.images[state.currIndex]?.text">\r\n  </div>\r\n  <div *ngIf="config.counter" class="g-number">\r\n    {{(state.currIndex + 1) + \'/\' + state.images.length}}\r\n  </div>\r\n</div>\r\n\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["*{box-sizing:border-box}:host{position:relative;left:0;right:0;z-index:205}.g-text-container{padding:1em 2em;color:#ccc;font-size:13px;display:flex;flex-direction:row;align-content:center;background-clip:padding-box;-webkit-font-smoothing:antialiased}.g-text{flex:1}"]}]}],G.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},G.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}]},G);function G(e,t){this.el=e,this.renderer=t}var k=(C.prototype.ngOnInit=function(){var t=this;if(this.contStyle=this.getContainerStyle(),this.gallery.config.gestures){if("undefined"==typeof Hammer)throw Error("[NgGallery]: HammerJS is undefined, make sure it is loaded");var n=this.el.nativeElement,e=new Hammer(n);e.on("panstart",function(){t.renderer.removeClass(n,"g-pan-reset")}),e.on("panend",function(){t.renderer.addClass(n,"g-pan-reset")}),e.on("pan",function(e){t.renderer.setStyle(n,"transform","translate3d("+e.deltaX+"px, 0px, 0px)")}),e.on("swipeleft",function(){t.gallery.next()}),e.on("swiperight",function(){t.gallery.prev()})}},C.prototype.translateThumbs=function(){return"translate3d("+-(l(this.state,"currIndex",0)*l(this.config,"width",0)+l(this.config,"width",0)/2)+"px, 0, 0)"},C.prototype.getContainerStyle=function(){var e="top"===this.config.position?0:2;return this.renderer.setStyle(this.el.nativeElement,"order",e),{height:this.config.height+"px",margin:this.config.space+"px"}},C.prototype.getThumbImage=function(e){var t=l(this.state,"images",[])[e]||{};return"url("+(t.thumbnail||t.src)+")"},C.decorators=[{type:r.Component,args:[{selector:"gallery-thumb",template:'<div #container class="g-thumb-container" [ngStyle]="contStyle">\r\n\r\n  <div class="g-thumbs" [style.transform]="translateThumbs()">\r\n\r\n    <div class="g-thumb" *ngFor="let image of state.images; let i = index"\r\n         [class.g-thumb-current]="i === state.currIndex"\r\n         [style.width.px]="gallery.config.thumbnails.width"\r\n         [style.height.px]="gallery.config.thumbnails.height">\r\n\r\n      <div class="g-thumb-image" [style.backgroundImage]="getThumbImage(i)"\r\n           [tap] (tapClick)="gallery.set(i)">\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{display:block;z-index:1}.g-thumb-container{position:relative;z-index:206;width:100%;height:100%;left:0;top:0;display:flex}.g-thumbs{position:absolute;top:0;left:50%;display:flex;align-items:center;transition:transform .3s ease-in;transform:translate3d(0,0,0)}.g-thumb{padding:8px;opacity:.5;transition:.2s linear}.g-thumb-image{cursor:pointer;width:100%;height:100%;background-position:center center;background-size:cover;box-shadow:0 0 4px rgba(0,0,0,.3)}.g-thumb-current{opacity:1;padding:2px}"]}]}],C.ctorParameters=function(){return[{type:c},{type:r.ElementRef},{type:r.Renderer2}]},C.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}]},C);function C(e,t,n){this.gallery=e,this.el=t,this.renderer=n}var M=(N.prototype.ngOnInit=function(){var i=this,a=this.el.nativeElement,e=function(){var r,e,t,n;!a||i.content&&i.content===a.innerText||(i.content=a.innerText,r=[],(e=a.querySelectorAll(i.subtree+(" img"+i.gallerize)))&&e.length?(t=Array.from(e).map(function(e){return e.dataset&&e.dataset.originalImageUrl?e.dataset.originalImageUrl:e.src}),n=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length)return!1;for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}(i.srcList,t),i.srcList=t,o.from(e).pipe(s.map(function(e,t){var n=e.dataset&&e.dataset.originalImageUrl?e.dataset.originalImageUrl:e.src;i.renderer.setStyle(e,"cursor","pointer"),i.filter&&!i.filter(e)||i.renderer.setProperty(e,"onclick",function(){-1!==i.srcList.indexOf(n)&&i.gallery.set(t)}),r.push({src:n,text:e.alt})}),s.finalize(function(){n||i.gallery.load(r)})).subscribe()):i.srcList=[])};new MutationObserver(e).observe(a,{subtree:!0,childList:!0}),e()},N.decorators=[{type:r.Directive,args:[{selector:"[gallerize]"}]}],N.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:c}]},N.propDecorators={gallerize:[{type:r.Input}],exclude:[{type:r.Input}],subtree:[{type:r.Input}],filter:[{type:r.Input}]},N);function N(e,t,n){this.el=e,this.renderer=t,this.gallery=n,this.srcList=[],this.subtree=""}var H=(Object.defineProperty(O.prototype,"lazyImage",{set:function(e){this.getImage(e)},enumerable:!0,configurable:!0}),O.prototype.getImage=function(e){var t=this;this.lazyWorker.next("");var n=this.renderer.createElement("img");n.src=e,n.onload=function(){t.lazyWorker.next(e)},n.onerror=function(e){console.error("[GalleryLazyDirective]:",e),t.lazyWorker.next("")}},O.decorators=[{type:r.Directive,args:[{selector:"[lazyImage]"}]}],O.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},O.propDecorators={lazyImage:[{type:r.Input,args:["lazyImage"]}],lazyLoad:[{type:r.Output}]},O);function O(e,t){var n=this;this.el=e,this.renderer=t,this.lazyWorker=new o.Subject,this.lazyLoad=new r.EventEmitter(!1),this.lazyWorker.pipe(s.switchMap(function(e){return o.of(e)})).subscribe(function(e){e?(n.renderer.setProperty(n.el.nativeElement,"src",e),n.lazyLoad.emit(!0)):n.lazyLoad.emit(!1)})}var L=(V.prototype.ngOnInit=function(){this.setTapEvent()},V.prototype.setTapEvent=function(){var e=this;if(this.gallery.config.gestures){if("undefined"==typeof Hammer)throw Error("[NgGallery]: HammerJS is undefined, make sure it is loaded");"undefined"!=typeof Hammer&&new Hammer(this.el.nativeElement).on("tap",function(){e.tapClick.emit()})}else this.renderer.setProperty(this.el.nativeElement,"onclick",function(){e.tapClick.emit()})},V.decorators=[{type:r.Directive,args:[{selector:"[tap]"}]}],V.ctorParameters=function(){return[{type:c},{type:r.ElementRef},{type:r.Renderer2}]},V.propDecorators={tap:[{type:r.Input}],tapClick:[{type:r.Output}]},V);function V(e,t,n){this.gallery=e,this.el=t,this.renderer=n,this.tapClick=new r.EventEmitter}function T(e){return new c(e)}var W=new r.InjectionToken("config"),R=(E.forRoot=function(e){return{ngModule:E,providers:[{provide:W,useValue:e},{provide:c,useFactory:T,deps:[W]}]}},E.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule],declarations:[p,z,k,M,j,h,v,w,y,Z,x,L,H],exports:[p,M,w]}]}],E);function E(){}e.GalleryComponent=p,e.GalleryBulletsComponent=y,e.animation=m,e.GalleryImageComponent=h,e.GalleryLoaderComponent=v,e.GalleryMainComponent=x,e.GalleryModalComponent=w,e.GalleryNavComponent=z,e.GalleryPlayerComponent=Z,e.GalleryTextComponent=j,e.GalleryThumbComponent=k,e.galleryFactory=T,e.CONFIG=W,e.GalleryModule=R,e.GalleryDirective=M,e.LazyDirective=H,e.TapDirective=L,e.GalleryService=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gallery-lib.umd.min.js.map